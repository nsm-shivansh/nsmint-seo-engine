<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="meta-title">N S Mint Products | Global Supply</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .dropdown:hover .dropdown-menu { display: block; }
        .hero-gradient { background: linear-gradient(135deg, #064e3b 0%, #065f46 100%); }
    </style>
</head>
<body class="bg-white text-slate-900 antialiased">

    <nav class="bg-white border-b border-slate-100 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <img src="https://www.nsmint.com/images/logo.png" alt="N S Mint Logo" class="h-14">
            <div class="hidden lg:flex items-center space-x-6 text-sm font-bold text-slate-500 uppercase tracking-widest">
                <span>3-Star Export House</span>
                <a href="https://www.nsmint.com/contact.html" class="bg-green-700 text-white px-6 py-2 rounded-full hover:bg-green-800 transition shadow-lg">Inquiry Now</a>
            </div>
        </div>

        <div class="bg-slate-900 text-white border-t border-slate-800 w-full overflow-visible">
            <div id="category-nav" class="max-w-7xl mx-auto px-6 flex justify-between items-center overflow-x-auto whitespace-nowrap min-h-[50px]">
                <span class="text-[9px] font-black text-slate-500 uppercase tracking-widest mr-4">Product Category:</span>
                </div>
        </div>
    </nav>

    <header class="hero-gradient text-white py-24 px-6">
        <div class="max-w-6xl mx-auto">
            <p class="text-green-300 font-black uppercase tracking-[0.3em] mb-4 text-xs">Certified Manufacturer & Exporter</p>
            <h1 id="main-heading" class="text-4xl md:text-7xl font-extrabold mb-8 leading-tight tracking-tighter">
                Loading Product Details...
            </h1>
            <p class="text-xl md:text-2xl text-green-50 max-w-3xl opacity-90 leading-relaxed font-light">
                Premium supply from our Sambhal facility. WHO-GMP and FSSC 22000 compliant quality standards for manufacturers in <span class="country-display font-bold text-green-300"></span>.
            </p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto py-20 px-6 grid lg:grid-cols-3 gap-16">
        <div class="lg:col-span-2 space-y-16">
            
            <section class="bg-slate-50 border border-slate-200 rounded-[2.5rem] p-10 shadow-2xl">
                <h2 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-10 text-center">Technical Compliance Data</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-px bg-slate-200 border border-slate-200 overflow-hidden rounded-2xl">
                    <div class="bg-white p-8">
                        <p class="text-[10px] font-black text-green-600 uppercase mb-2">Standard Grade</p>
                        <p id="spec-grade" class="text-2xl font-extrabold text-slate-900">...</p>
                    </div>
                    <div class="bg-white p-8">
                        <p class="text-[10px] font-black text-green-600 uppercase mb-2">Chemical Purity</p>
                        <p id="spec-purity" class="text-2xl font-extrabold text-slate-900">...</p>
                    </div>
                    <div class="bg-white p-8">
                        <p class="text-[10px] font-black text-green-600 uppercase mb-2">Extraction Method</p>
                        <p id="spec-method" class="text-2xl font-extrabold text-slate-900">...</p>
                    </div>
                    <div class="bg-white p-8">
                        <p class="text-[10px] font-black text-green-600 uppercase mb-2">Origin</p>
                        <p class="text-2xl font-extrabold text-slate-900">Sambhal, India</p>
                    </div>
                </div>
            </section>

            <article class="prose prose-slate max-w-none prose-lg">
                <h2 class="text-4xl font-extrabold text-slate-900 tracking-tight"><span id="article-prod"></span> Supply to <span class="country-display"></span></h2>
                <p id="p1" class="text-xl text-slate-600 leading-relaxed"></p>
                <div class="bg-green-50 rounded-3xl p-10 border border-green-100 my-12">
                    <h3 class="text-2xl font-extrabold text-green-900 mb-6 text-center italic">"Quality that meets global pharmacopeia standards."</h3>
                    <ul class="grid md:grid-cols-2 gap-6 text-slate-700 font-semibold list-none p-0">
                        <li class="flex items-center"><span class="w-3 h-3 bg-green-500 rounded-full mr-3 shrink-0"></span>Pharmaceutical & API Grade</li>
                        <li class="flex items-center"><span class="w-3 h-3 bg-green-500 rounded-full mr-3 shrink-0"></span>FMCG & Oral Care</li>
                        <li class="flex items-center"><span class="w-3 h-3 bg-green-500 rounded-full mr-3 shrink-0"></span>Flavors & Fragrances</li>
                        <li class="flex items-center"><span class="w-3 h-3 bg-green-500 rounded-full mr-3 shrink-0"></span>Industrial Distillation</li>
                    </ul>
                </div>
                <p id="p2" class="text-xl text-slate-600 leading-relaxed"></p>
            </article>
        </div>

        <aside class="lg:col-span-1">
            <div class="sticky top-32 bg-slate-900 text-white rounded-[2rem] p-10 shadow-2xl">
                <h3 class="text-2xl font-black mb-4">Export Desk</h3>
                <p class="text-slate-400 text-sm mb-8 leading-relaxed italic text-balance">Direct factory pricing for <span class="country-display text-green-400"></span> importers.</p>
                <a href="mailto:sales@nsmint.com" id="email-link" class="block w-full text-center bg-green-600 hover:bg-green-700 text-white font-bold py-5 rounded-2xl transition shadow-lg uppercase text-xs tracking-widest">Send Inquiry</a>
            </div>
        </aside>
    </main>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const countryName = urlParams.get('country') || 'Libya';
        const productName = urlParams.get('product') || 'L-Menthol Crystals IP';
        
        // RE-CHECK: Ensure this URL ends in output=csv
        const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTin-HV31mE-Bj1ksOeaiFwvBKQbc7MLpk1XiYm69v63yhualNST3yEDCZ-CWtoN0-9IZlzqu7zoR1e/pubhtml';

        async function init() {
            document.getElementById('meta-title').innerText = `${productName} in ${countryName} | N S Mint Products`;
            document.getElementById('main-heading').innerText = `${productName} Supply to ${countryName}`;
            document.getElementById('article-prod').innerText = productName;
            document.querySelectorAll('.country-display').forEach(el => el.innerText = countryName);

            try {
                const res = await fetch(sheetUrl);
                const csvData = await res.text();
                const rows = csvData.split(/\r?\n/).map(row => row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/));
                
                const header = rows[0];
                // Automatically find column indices
                const idxCat = header.findIndex(h => h.toLowerCase().includes('category'));
                const idxProd = header.findIndex(h => h.toLowerCase().includes('product'));
                const idxCtry = header.findIndex(h => h.toLowerCase().includes('country'));
                const idxPurity = header.findIndex(h => h.toLowerCase().includes('purity'));
                const idxGrade = header.findIndex(h => h.toLowerCase().includes('grade'));
                const idxMethod = header.findIndex(h => h.toLowerCase().includes('method'));

                const navSilos = {};

                for (let i = 1; i < rows.length; i++) {
                    const cols = rows[i];
                    if (cols.length < 3) continue;

                    const rowCat = cols[idxCat]?.replace(/"/g, '').trim();
                    const rowProd = cols[idxProd]?.replace(/"/g, '').trim();
                    const rowCtry = cols[idxCtry]?.replace(/"/g, '').trim();

                    // 1. Build Nav Silo (Products available in this country)
                    if (rowCtry === countryName) {
                        if (!navSilos[rowCat]) navSilos[rowCat] = [];
                        if (!navSilos[rowCat].includes(rowProd)) navSilos[rowCat].push(rowProd);

                        // 2. Exact Match for Page Content
                        if (rowProd.toLowerCase() === productName.toLowerCase()) {
                            document.getElementById('spec-purity').innerText = cols[idxPurity]?.replace(/"/g, '') || 'High Purity';
                            document.getElementById('spec-grade').innerText = cols[idxGrade]?.replace(/"/g, '') || 'Standard';
                            document.getElementById('spec-method').innerText = cols[idxMethod]?.replace(/"/g, '') || 'Distilled';
                        }
                    }
                }

                // 3. Render Mega Menus
                const nav = document.getElementById('category-nav');
                nav.innerHTML = ''; 
                Object.keys(navSilos).forEach(cat => {
                    const menu = document.createElement('div');
                    menu.className = "dropdown relative group";
                    menu.innerHTML = `
                        <button class="text-[10px] font-extrabold uppercase tracking-tight text-slate-300 group-hover:text-green-400 py-4 px-3 flex items-center">
                            ${cat} <span class="ml-1 opacity-50">â–¼</span>
                        </button>
                        <div class="dropdown-menu absolute hidden left-0 bg-white text-slate-900 shadow-2xl rounded-xl p-2 min-w-[280px] border border-slate-100 top-full z-[100]">
                            ${navSilos[cat].map(p => `
                                <a href="page.html?product=${encodeURIComponent(p)}&country=${encodeURIComponent(countryName)}" 
                                   class="block text-[11px] font-bold py-2 px-4 hover:bg-green-50 hover:text-green-800 rounded-lg transition">
                                   ${p}
                                </a>
                            `).join('')}
                        </div>`;
                    nav.appendChild(menu);
                });

                document.getElementById('p1').innerText = `As a recognized 3-Star Export House, N S Mint Products provides direct industrial-scale supply of ${productName} to manufacturers throughout ${countryName}. Our Sambhal-based production facility ensures that every shipment meets the specific purity requirements and regulatory compliance standards of the ${countryName} market.`;
                document.getElementById('p2').innerText = `We manage the entire export lifecycle for ${productName} to ${countryName}, including full REACH documentation and WHO-GMP quality certification. Our commitment to farm-to-factory transparency allows ${countryName} procurement managers to secure high-quality ${productName} with guaranteed chemical stability and reliability.`;

            } catch (err) {
                console.error("Critical Error:", err);
            }
        }
        init();
    </script>
</body>
</html>
